/*!
  * WhatsApp Widget v1.3.0 (c) 2020 - Fajar Setya Budi
  * Contributors (https://github.com/agraris/whatsapp-widget/graphs/contributors)
  * Licensed under MIT (https://github.com/agraris/whatsapp-widget/blob/master/LICENSE)
  * WhatsApp Widget does not affiliate with WhatsApp Inc. in any way.
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).WhatsAppWidget=t()}(this,(function(){"use strict";const e="wa-widget-content",t="expanded",n="invalid",i="wa-chat",s="wa-send",o=`[data-toggle="${i}"]`,a=`[data-toggle="${s}"]`,l={name:"",division:"",photo:"",introduction:""},c={name:"string",division:"string",photo:"string",introduction:"string"},d=[{name:"name",type:"text",required:!0},{name:"message",type:"text",required:!0}],r={name:"string",type:"string",required:"boolean"},h={};class u{constructor(e,t,n){h[e.id]||(this._element=e,this._config=this._getConfig(t),this._inputs=this._getInput(n),this._phoneNumber=this._element.getAttribute("action"),this._isShown=!1,this._toggleChat="",this._contentElement="",this._toggleSend="",this._buildHTML(),this._setEventListener(),h[e.id]=this)}toggle(){for(const e of Object.keys(h))e!==this._element.id&&h[e]._isShown&&h[e].toggle();this._isShown?this._hide():this._show()}_sendMessage(){if(!/^\d+$/.test(this._phoneNumber))throw new Error("Phone number ("+this._phoneNumber+") is invalid.");const e=this._element.querySelectorAll("input[name]");let t="https://wa.me/"+this._phoneNumber+"?text=",n=!0;for(const i of e)this._formValidation(i)||(n=!1),i.value&&(t+=i.name.replace(/^./,i.name[0].toUpperCase())+": "+i.value+"%0A");n&&window.open(t,"_blank")}_buildHTML(){if(this._element.innerHTML)return!1;this._verifyInput(this._inputs);const t=document.createElement("a"),n="#"+this._element.id;t.href=n,t.classList.add("wa-widget-toggle"),t.dataset.toggle=i,t.dataset.target=n,t.innerHTML='<svg viewBox="0 0 90 90" fill="rgb(79, 206, 93)" width="32" height="32">\n            <path d="M90,43.841c0,24.213-19.779,43.841-44.182,43.841c-7.747,0-15.025-1.98-21.357-5.455L0,90l7.975-23.522   c-4.023-6.606-6.34-14.354-6.34-22.637C1.635,19.628,21.416,0,45.818,0C70.223,0,90,19.628,90,43.841z M45.818,6.982   c-20.484,0-37.146,16.535-37.146,36.859c0,8.065,2.629,15.534,7.076,21.61L11.107,79.14l14.275-4.537   c5.865,3.851,12.891,6.097,20.437,6.097c20.481,0,37.146-16.533,37.146-36.857S66.301,6.982,45.818,6.982z M68.129,53.938   c-0.273-0.447-0.994-0.717-2.076-1.254c-1.084-0.537-6.41-3.138-7.4-3.495c-0.993-0.358-1.717-0.538-2.438,0.537   c-0.721,1.076-2.797,3.495-3.43,4.212c-0.632,0.719-1.263,0.809-2.347,0.271c-1.082-0.537-4.571-1.673-8.708-5.333   c-3.219-2.848-5.393-6.364-6.025-7.441c-0.631-1.075-0.066-1.656,0.475-2.191c0.488-0.482,1.084-1.255,1.625-1.882   c0.543-0.628,0.723-1.075,1.082-1.793c0.363-0.717,0.182-1.344-0.09-1.883c-0.27-0.537-2.438-5.825-3.34-7.977   c-0.902-2.15-1.803-1.792-2.436-1.792c-0.631,0-1.354-0.09-2.076-0.09c-0.722,0-1.896,0.269-2.889,1.344   c-0.992,1.076-3.789,3.676-3.789,8.963c0,5.288,3.879,10.397,4.422,11.113c0.541,0.716,7.49,11.92,18.5,16.223   C58.2,65.771,58.2,64.336,60.186,64.156c1.984-0.179,6.406-2.599,7.312-5.107C68.398,56.537,68.398,54.386,68.129,53.938z"></path>\n        </svg>';const s=`${t.outerHTML}\n            <div class="${e} chat-tab">\n                <header class="chat-header">\n                    <div class="chat-admin-picture">\n                        <img src="${this._config.photo}" alt="${this._config.name}'s Photo">\n                    </div>\n                    <div class="chat-admin-details">\n                        <h4>${this._config.name}</h4>\n                        <p><small>${this._config.division}</small></p>\n                    </div>\n                </header>\n                <div class="chat-content">\n                    <div class="chat-item">\n                        <p>${this._config.introduction}</p>\n                    </div>\n                </div>\n                ${this._buildInputs(this._inputs).outerHTML}\n            </div>`;this._element.innerHTML=s}_buildInputs(e){const t=document.createElement("div");t.classList.add("chat-form");for(const n of e){let e=document.createElement("input");e.name=n.name,e.type=n.type,e.value=n.value??void 0,"hidden"!==n.type&&(e.required=n.required),n.placeholder&&(e.placeholder=n.placeholder.replace(/^./,n.placeholder[0].toUpperCase())),t.append(e)}const n=document.createElement("button");return n.classList.add("chat-send"),n.type="submit",n.dataset.toggle=s,n.innerHTML="<strong>Send</strong>",t.append(n),t}_setEventListener(){this._toggleChat=document.querySelector(o+'[data-target="#'+this._element.id+'"]'),this._contentElement=this._element.querySelectorAll("."+e).item(0),this._toggleSend=this._element.querySelector(a),this._toggleChat&&this._toggleChat.addEventListener("click",(e=>{e.preventDefault(),this.toggle()})),this._toggleSend&&this._toggleSend.addEventListener("click",(e=>{e.preventDefault(),this._sendMessage()}))}_show(){this._element.classList.add(t),this._toggleChat.classList.add(t),this._contentElement.classList.add(t),this._isShown=!0}_hide(){this._element.classList.remove(t),this._toggleChat.classList.remove(t),this._contentElement.classList.remove(t),this._isShown=!1}_formValidation(e){if(e.classList.remove(n),e.required&&(""==e.value||null==e.value))return e.classList.add(n),!1;if("email"===e.type)if(e.value&&!/^\S+@\S+$/.test(e.value))return e.classList.add(n),!1;return!0}_getConfig(e){return e={...l,...e},this._typeCheck(e,c),e}_getInput(e){return void 0===e||0===e.length?d:e}_verifyInput(e){for(const t of e)this._typeCheck(t,r)}_typeCheck(e,t){for(const n of Object.keys(t)){const i=t[n],s=e[n],o=s&&this._isElement(s)?"element":this._toType(s);if(!new RegExp(i).test(o))throw new Error(`WhatsApp Widget: Option "${n}" provided type "${o}" but expected type "${i}".`)}}_isElement(e){(e[0]||e).nodeType}_toType(e){return null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}}return window.addEventListener("load",(()=>{const e=document.querySelectorAll("[data-chat]");for(const t of e)new u(t,{},[])})),u}));